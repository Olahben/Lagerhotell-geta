@using System.ComponentModel.DataAnnotations
@using System.Globalization
@using System.Text
@using System.Text.Json
@using System.Collections.Generic
@using Lagerhotell.Services.UserService
@using LagerhotellAPI.Models

@page "/log-in";

<AuthorizeView>
    <NotAuthorized>
    <LoginForm />
    </NotAuthorized>
    <Authorized>
        <div style="text-align: center; max-width: 600px; margin: 40px auto; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <MudText Typo="Typo.h5" GutterBottom style="color: #333;">Du er allerede logget inn</MudText>
             <MudText style="color: #555;">Velkommen tilbake! Du kan fortsette å bruke appen, eller logge ut om du ønsker det.</MudText>
             <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="@LogOutUser" Style="margin-top: 20px;">Logg ut</MudButton>
         </div>
    </Authorized>          
</AuthorizeView>

@inject HttpClient http
@inject NavigationManager navigationManager
@inject SessionService sessionService
@inject ISnackbar snackbar
@code {
    private LagerhotellAPI.Models.CheckPhoneNumber checkPhoneNumber = new LagerhotellAPI.Models.CheckPhoneNumber();
    private readonly UserServiceLogin userServiceLogin = new();
    public string PhoneNumberRegistered = "";
    public string ErrorMessage = "";

    protected override async Task OnInitializedAsync()
    {
        /* string jwtToken = await sessionService.GetJwtFromLocalStorage();
        if (jwtToken != null)
            {
            // decode token
        } */
    }

    public async void LogOutUser()
    {
        // Log out
    }
}
