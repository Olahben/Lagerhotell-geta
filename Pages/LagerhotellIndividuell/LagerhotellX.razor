@page "/lagerhotell/{warehouseHotelName}"
@inject WarehouseHotelService _warehouseHotelService
@inject NavigationManager _navigationManager
@inject SessionService _sessionService

<style>
    .lagerhotell-card-header {
        background-color: rgb(89, 74, 226);
    }

    .pt-16 {
        padding-top: 0 !important;
    }

    .my-16 {
        margin-top: 32px !important;
    }

    .mud-container {
        padding-left: 8px;
        padding-right: 8px;
    }
</style>

<MudBreadcrumbs Items="BreadcrumbItems"></MudBreadcrumbs>
<MudPaper Class="lagerhotell-card-header" Elevation="0" Color="Color.Primary" Height="300px" Width="100%">

</MudPaper>

@code {
    [Parameter]
    public string? warehouseHotelName { get; set; }
    private WarehouseHotel? relevantWarehouseHotel { get; set; }
    private List<BreadcrumbItem> BreadcrumbItems { get; set; } = new List<BreadcrumbItem>
    {
        new BreadcrumbItem("Hjem", href: "/", icon: Icons.Material.Filled.Home),
        new BreadcrumbItem("Lagerhotell", href: null, disabled: true, icon: Icons.Material.Filled.LocationCity),
    };

    protected override async Task OnInitializedAsync()
    {
        try
        {
            string token = await _sessionService.GetJwtFromLocalStorage();
            relevantWarehouseHotel = await _warehouseHotelService.GetWarehouseHotelByName(warehouseHotelName, token);
            // Change href for location
            BreadcrumbItems.Add(new BreadcrumbItem(relevantWarehouseHotel.LocationName, href: null, icon: Icons.Material.Filled.MyLocation));
            BreadcrumbItems.Add(new BreadcrumbItem(relevantWarehouseHotel.Name, href: $"/lagerhotell/{relevantWarehouseHotel.Name}", icon: Icons.Material.Filled.LocationCity));

        }
        catch (Exception e)
        {
            Snackbar.Add($"Lagerhotell ${warehouseHotelName} kunne ikke hentes inn", MudBlazor.Severity.Error);
        }
    }
}
